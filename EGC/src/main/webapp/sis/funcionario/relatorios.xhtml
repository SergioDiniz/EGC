<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>EGC - Prefeitura</title>
    </h:head>
    <h:body style="background-color: #f9f9f9">

        <div class="tudo">

            <div id="menu">
                <ui:include src="topo.xhtml"/>
            </div>

            <div id="menu-lateral">
                <ui:include src="menulateral.xhtml"/>
            </div>

            <div class="area-titulo-pagina">
                <div class="titulo-pagina">Relatório!</div>
            </div>



            <div class="container">
                <div class="text-center">
                    <br/>
                    <label><h1 class="texto-100">Numero de Denúncias por Rua e Tipo</h1></label>
                </div>

                <div>
                    <table class="table table-bordered table-striped table-hover">
                        <tr class="active">
                            <th>Nº</th>
                            <th>Rua</th>
                            <th>Tipo de Denúncia</th>
                            <th>Realizadas</th>
                            <th>Atendidas</th>
                        </tr>

                        <c:forEach varStatus="index" var="rua" items="#{controladorDenuncia.ruasDeUmaCidadeTipoDenunciaNumerosDeDenuncia(controladorFuncionario.cidade.cidadePK.nomeCidade, controladorFuncionario.cidade.cidadePK.siglaEstado)}">
                            <tr>
                                <td>#{index.count}</td>
                                <td>#{rua.get(0)}</td>
                                <td>#{rua.get(1)}</td>
                                <td>#{rua.get(2)}</td>
                                <td>#{controladorDenuncia.totalDeDenunciasAtendidasPorTipoERua(controladorFuncionario.cidade.cidadePK.nomeCidade, controladorFuncionario.cidade.cidadePK.siglaEstado, rua.get(0), rua.get(1))}</td>
                            </tr>
                        </c:forEach>
                        <tr>
                            <th colspan="3">Total</th>
                            <th>#{controladorCidade.totalDeDenunciasNaCidade(controladorFuncionario.cidade.cidadePK.nomeCidade, controladorFuncionario.cidade.cidadePK.siglaEstado)}</th>
                            <th>#{controladorCidade.totalDeDenunciasAtendidasNaCidade(controladorFuncionario.cidade.cidadePK.nomeCidade, controladorFuncionario.cidade.cidadePK.siglaEstado)}</th>
                        </tr>
                    </table>
                </div>
            </div>


        </div>
    </h:body>
</html>

